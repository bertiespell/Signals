# Avenue

## Build Locally

```bash
# Starts the replica, running in the background
dfx start --background

# Deploys your canisters to the replica and generates your candid interface
dfx deploy
```

Once the job completes, your application will be available at `http://localhost:8000?canisterId={asset_canister_id}`.

Additionally, if you are making frontend changes, you can start a development server with

```bash
npm start
```

Which will start a server at `http://localhost:8080`, proxying API requests to the replica at port 8000.

### Note on frontend environment variables

If you are hosting frontend code somewhere without using DFX, you may need to make one of the following adjustments to ensure your project does not fetch the root key in production:

-   set`NODE_ENV` to `production` if you are using Webpack
-   use your own preferred method to replace `process.env.NODE_ENV` in the autogenerated declarations
-   Write your own `createActor` constructor

# To update Tailwind CSS

`npx tailwindcss -i ./src/avenue_assets/assets/main.css -o ./dist/avenue_assets/main.css --watch`

# During development to test again with clean state

```
dfx stop
dfx start --background --clean
dfx deploy
npm start
```

You'll maybe want to remove any problem packages from the dfx.json (for instance installing ledger isn't working yet)

# Internet Identity

The app is currently configured to work with a local copy of the internet identity canister running on port 8080

Follow the instructions over: https://github.com/dfinity/internet-identity, specifically, in the HACKING document: https://github.com/dfinity/internet-identity/blob/main/HACKING.md#running-locally

I.e. install the Internet Identity canister

```
npm ci
dfx start --clean --background
II_FETCH_ROOT_KEY=1 dfx deploy --no-wallet --argument '(null)'
dfx canister call internet_identity init_salt
```

Then `npm start` on the FE (which is where the actor is looking in the User Context)

# Ledger

You'll also need to set up the ledger if you want to run this locally. Instructions over here:

```
export IC_VERSION=430eff2024adc2cea9ffd081a94dcb0ce4f96f58
curl -o ledger.wasm.gz https://download.dfinity.systems/ic/430eff2024adc2cea9ffd081a94dcb0ce4f96f58/canisters/ledger-canister_notify-method.wasm.gz
gunzip ledger.wasm.gz
curl -o ledger.private.did https://raw.githubusercontent.com/dfinity/ic/430eff2024adc2cea9ffd081a94dcb0ce4f96f58/rs/rosetta-api/ledger.did
curl -o ledger.public.did https://raw.githubusercontent.com/dfinity/ic/430eff2024adc2cea9ffd081a94dcb0ce4f96f58/rs/rosetta-api/ledger_canister/ledger.did
```

# DAO interacting with the DAO, to submit a proposal:

We can change `transfer_fee` by calling rust_avenue's `update_system_params` method. This method takes
a `UpdateSystemParamsPayload` as an arg, which we need to encode into a `blob` to use in `ProposalPayload`.
Use `didc` to encode a `UpdateSystemParamsPayload`:

```text
$ didc encode '(record { transfer_fee = opt record { amount_e8s = 20_000:nat64; }; })' -f blob


$ didc encode '(record { tokens_received_for_signal_creation = 2:nat64; })' -f blob

```

Output:

```text
blob "DIDL\03l\01\f2\c7\94\ae\03\01n\02l\01\b9\ef\93\80\08x\01\00\01 N\00\00\00\00\00\00"
```

We can then submit the proposal:

```text
$ dfx canister call rust_avenue submit_proposal '(record { canister_id = principal "ryjl3-tyaaa-aaaaa-aaaba-cai";
   method = "update_system_params":text;
   metadata = "tokens_received_for_signal_creation":text;
   message = blob "DIDL\01l\01\87\8f\c3Ux\01\00\02\00\00\00\00\00\00\00";

})'
```

Note the output proposal ID:

```text
(variant { Ok = 0 : nat64 })
```

# To do

-   Show the user profile nicely, save the Principle against a username and profile pic url (stored in IPFS)
-   Create ways to pay in ICP via app for Trades
-   Create NFT ticketed app for Events
-   Give users greater control over their signals - you should be able to edit and delete your own
-   IPFS integration for profile pics, and also for the marketplace
-   buying and selling
-   better ways to launch DAOs
-   Add bookmarks/favourites to chats
-   list the chats you're in
-   Paginate data
-   Split functionality into different canisters
-   Add polling for messages to support real time chat
-   Make the code generally a lot better lol
-   Add searches for signals (by description, chat content, etc)
-   Add searchs for location (currently you have to scroll the map, it's better UX to search for places you're interested in)
-   Make the app mobile friends, I've kind of ignored this for now
-   Use React Leaflet instead of all the custom stuff I added https://react-leaflet.js.org/docs/example-draggable-marker/
-   Add way more data validation (both BE and FE)
-   See who's attending events and add profile view
-   Add better page about how DAO works and how to get involved
-   Create better incentive mechanisms (getting others to sign up, etc)
-   Show number of likes
-   Fix bug with likes: update state when a signal gets enough downvotes that it's deleted

Extension Ideas

-   Integrate with other companies/solutions working on "Proof of location" (IMO this is still a big open question not just for blockchain but tech in general)
-   Proper DAO launcher (using DAO templates)
-   Intergrate proper buying/selling of items and marketplace

Welcome to Signals

I was inspired to build Signals after moving to a new city and finding it hard to connect with new people. It occurred to me that I pass the same people every day because of our shared interests or hobbies - we live in the same building, we go to the same gym, enjoy the same cafes or play the same sports. Yet there is very little infrastructure to discover one another. Despite an epidemic of loneliness, crowded cities and all of use carrying devices that constantly signal our location and availability to private companies... so often it seems harder than ever to connect with one another. Signals presents an opportunity to re-think social media, to put connection instead of content at the heart.

I'm also very interested in DAOs as one of the most immediate and useful applications of blockchain for the average user, but much needs to be done to not just make them accessible to communities and people, but to educate on the potential posed by the technology. Since Signals allows users to connect over shared interests and places geographically, it already encourages the formation of communities and DAOs make it easier to organise in more advanced ways. it easily form communities with one another to organise their interests, in that vein, I see Signals as creating a dual opportunity for users: one to discover and connnect, and the other to organise and launch further DAOsl

At this stage Signals is really just a proof of concept, but there are many things I'd like it to be, some of which are already implemented or alluded to here. Signals itself is organized as a DAO, so as users interact with the app they are rewarded in Signals Tokens. These tokens allow them to create and vote on proposals to modify the application, meaning that data and configuration is placed in the users hands. I'd really love to extend this idea to be a DAO launcher platform, where after connecting over shared spaces and interests, people can use the platform to manage their affairs. As an example, I've been part of shared rehersal spaces for musicians where the rent is paid together - organising people traditionally in this way was always difficult and not very transparent - I'd love Signals to become a way that people can not just discover these kinds of spaces but also to organise activities such as a subscription based model for community services like this.

Since Signals is tied to geography and your location, it makes it ideal for several other purposes too - such as geographically based events. It is possible in the app to buy and sell tickets to events (which works similarly to an NFT). It's also possible to list local items and services, for sale which creates further potential for the economic viability of the project, but also just encouraging people to buy second-hand, the environmental benefits of which shouldn't be overlooked. Since everything happens on a map, it's really a limitless potential for opportunity and expansion - for example, you could drop a pin of your location on the map which calls to a specific ride sharing canister to look for available drivers.

I'd love the opportunity to develop these ideas, and implement a production ready version of this idea. I've loved building on the ICP and have felt very inspired by the idea of building a completely decentralized app. Thanks so much for reading if you made it this far. I'm always very happy to hear feedback and of course - to make new connections - so feel free to reach out.

Made with <3 by Bertie Spell

Debugging: Sometimes the dfx deploy seems to go wrong :| I think it's when it's running in two places, but I'm really not sure, best effort invovles:

-   dfx stop (in both internet-identity and Signals)
-   delete .dfx folder
-   dfx start (in Signals)
-   dfx deploy (in Signals)
-   dfx deploy (internet-identity) - II_FETCH_ROOT_KEY=1 dfx deploy --no-wallet --argument '(null)'
-   npm start (in internet-indentity) (this needs port 8000)
-   npm start (in Signals) this now falls back to 80001

If in
